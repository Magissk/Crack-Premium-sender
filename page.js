!function(){var e=setInterval(()=>{(function(){function e(e){let t=0,n=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.processAttachments?e.default:null},{id:"MediaProcess",conditions:e=>e.BLOB?e:null},{id:"Wap",conditions:e=>e.createGroup?e:null},{id:"ServiceWorker",conditions:e=>e.default&&e.default.killServiceWorker?e:null},{id:"State",conditions:e=>e.STATE&&e.STREAM?e:null},{id:"WapDelete",conditions:e=>e.sendConversationDelete&&2==e.sendConversationDelete.length?e:null},{id:"Conn",conditions:e=>e.default&&e.default.ref&&e.default.refTTL?e.default:null},{id:"WapQuery",conditions:e=>e.default&&e.default.queryExist?e.default:null},{id:"CryptoLib",conditions:e=>e.decryptE2EMedia?e:null},{id:"OpenChat",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.openChat?e.default:null},{id:"UserConstructor",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null},{id:"SendTextMsgToChat",conditions:e=>e.sendTextMsgToChat?e.sendTextMsgToChat:null},{id:"WidFactory",conditions:e=>e.createUserWid?e:null},{id:"SendSeen",conditions:e=>e.sendSeen?e.sendSeen:null},{id:"sendDelete",conditions:e=>e.sendDelete?e.sendDelete:null},{id:"Cmd",conditions:function(e){return e.default&&e.default.openModalMedia?e.default:null}},{id:"Me",conditions:function(e){return e.PLATFORMS&&e.Conn?e.default:null}}];for(let i in e)if("object"==typeof e[i]&&null!==e[i]&&(n.forEach(n=>{if(!n.conditions||n.foundedModule)return;let o=n.conditions(e[i]);null!==o&&(t++,n.foundedModule=o)}),t==n.length))break;let i=n.find(e=>"Store"===e.id);return window.Store=i.foundedModule?i.foundedModule:{},n.splice(n.indexOf(i),1),n.forEach(e=>{e.foundedModule&&(window.Store[e.id]=e.foundedModule)}),window.Store.Chat.modelClass.prototype.sendMessage=function(e){window.Store.SendTextMsgToChat(this,...arguments)},window.Store}return new Promise((t,n)=>{if(null===document.querySelector("#pane-side")||"function"!=typeof webpackJsonp&&!webpackChunkwhatsapp_web_client)n("Page not loaded yet");else if("function"==typeof webpackJsonp)webpackJsonp([],{parasite:(i,o,s)=>{try{e(s),t()}catch(e){n(e)}}},["parasite"]);else{let i=(new Date).getTime();webpackChunkwhatsapp_web_client.push([["parasite"+i],{},function(i,o,s){let a=[];for(let e in i.m){let t=i(e);a.push(t)}try{e(a),t()}catch(e){n(e)}}])}})})().then(()=>{window.Store.Chat._find||(window.Store.Chat._findAndParse=window.Store.BusinessProfile._findAndParse,window.Store.Chat._find=window.Store.BusinessProfile._find),window.TWS_WAPI={lastRead:{}},window.TWS_WAPI._serializeRawObj=(e=>{if(e){let t={};e=e.toJSON?e.toJSON():{...e};for(let n in e)"id"!==n?"object"!=typeof e[n]||Array.isArray(e[n])?t[n]=e[n]:t[n]=window.TWS_WAPI._serializeRawObj(e[n]):t[n]={...e[n]};return t}return{}}),window.TWS_WAPI._serializeChatObj=(e=>null==e?null:Object.assign(window.TWS_WAPI._serializeRawObj(e),{kind:e.kind,isGroup:e.isGroup,contact:e.contact?window.TWS_WAPI._serializeContactObj(e.contact):null,groupMetadata:e.groupMetadata?window.TWS_WAPI._serializeRawObj(e.groupMetadata):null,presence:e.presence?window.TWS_WAPI._serializeRawObj(e.presence):null,msgs:null})),window.TWS_WAPI._serializeContactObj=(e=>null==e?null:Object.assign(window.TWS_WAPI._serializeRawObj(e),{formattedName:e.formattedName,displayName:e.displayName,isHighLevelVerified:e.isHighLevelVerified,isMe:e.isMe,isMyContact:e.isMyContact,isPSA:e.isPSA,isUser:e.isUser,isVerified:e.isVerified,isWAContact:e.isWAContact,profilePicThumbObj:e.profilePicThumb?TWS_WAPI._serializeProfilePicThumb(e.profilePicThumb):{},statusMute:e.statusMute,msgs:null})),window.TWS_WAPI._serializeMessageObj=(e=>null==e?null:Object.assign(window.TWS_WAPI._serializeRawObj(e),window.TWS_WAPI._serializeRawObj({id:e.id._serialized,sender:e.senderObj?TWS_WAPI._serializeContactObj(e.senderObj):null,timestamp:e.t,content:e.body,isGroupMsg:e.isGroupMsg,isLink:e.isLink,isMMS:e.isMMS,isMedia:e.isMedia,isNotification:e.isNotification,isPSA:e.isPSA,type:e.type,chat:TWS_WAPI._serializeChatObj(e.chat),chatId:e.id.remote,quotedMsgObj:TWS_WAPI._serializeMessageObj(e._quotedMsgObj),mediaData:window.TWS_WAPI._serializeRawObj(e.mediaData)}))),window.TWS_WAPI._serializeNumberStatusObj=(e=>null==e?null:Object.assign({},window.TWS_WAPI._serializeRawObj({id:e.jid,status:e.status,isBusiness:!0===e.biz,canReceiveMessage:200===e.status}))),window.TWS_WAPI._serializeProfilePicThumb=(e=>null==e?null:Object.assign({},window.TWS_WAPI._serializeRawObj({eurl:e.eurl,id:e.id,img:e.img,imgFull:e.imgFull,raw:e.raw,tag:e.tag}))),window.TWS_WAPI.createGroup=function(e,t){return Array.isArray(t)||(t=[t]),window.Store.Wap.createGroup(e,t)},window.TWS_WAPI.leaveGroup=function(e){return e="string"==typeof e?e:e._serialized,TWS_WAPI.getChat(e).sendExit()},window.TWS_WAPI.getAllContacts=function(e){const t=window.Store.Contact.map(e=>TWS_WAPI._serializeContactObj(e));return void 0!==e&&e(t),t},window.TWS_WAPI.getMyContacts=function(e){const t=window.Store.Contact.filter(e=>!0===e.isMyContact).map(e=>TWS_WAPI._serializeContactObj(e));return void 0!==e&&e(t),t},window.TWS_WAPI.getContact=function(e,t){const n=window.Store.Contact.get(e);return void 0!==t&&t(window.TWS_WAPI._serializeContactObj(n)),window.TWS_WAPI._serializeContactObj(n)},window.TWS_WAPI.getAllChats=function(e){const t=window.Store.Chat.map(e=>TWS_WAPI._serializeChatObj(e));return void 0!==e&&e(t),t},window.TWS_WAPI.haveNewMsg=function(e){return e.unreadCount>0},window.TWS_WAPI.getAllChatsWithNewMsg=function(e){const t=window.Store.Chat.filter(window.TWS_WAPI.haveNewMsg).map(e=>TWS_WAPI._serializeChatObj(e));return void 0!==e&&e(t),t},window.TWS_WAPI.getAllChatIds=function(e){const t=window.Store.Chat.map(e=>e.id._serialized||e.id);return void 0!==e&&e(t),t},window.TWS_WAPI.getAllGroups=async function(e){const t=await Promise.all(window.Store.Chat.filter(e=>e.isGroup).map(e=>window.Store.GroupMetadata.update(e.id).then(()=>{let{participants:t}=e.groupMetadata;return t=t.map(e=>e.contact).filter(e=>!e.isMe).map(e=>window.TWS_WAPI._serializeContactObj(e)),Object.assign(window.TWS_WAPI._serializeChatObj(e),{participants:t})})));return void 0!==e&&e(t),t},window.TWS_WAPI.getAllBroadcasts=async function(e){const t=await Promise.all(window.Store.Chat.filter(e=>e.isBroadcast).map(e=>window.Store.GroupMetadata.update(e.id).then(()=>{let{participants:t}=e.groupMetadata;return t=t.map(e=>e.contact).filter(e=>!e.isMe).map(e=>window.TWS_WAPI._serializeContactObj(e)),Object.assign(window.TWS_WAPI._serializeChatObj(e),{participants:t})})));return void 0!==e&&e(t),t},window.TWS_WAPI.getChat=function(e,t){e="string"==typeof e?e:e._serialized;const n=window.Store.Chat.get(e);return n.sendMessage=n.sendMessage?n.sendMessage:function(){return window.Store.sendMessage.apply(this,arguments)},void 0!==t&&t(n),n},window.TWS_WAPI.getChatByName=function(e,t){const n=window.TWS_WAPI.getAllChats().find(t=>t.name.includes(e));return void 0!==t&&t(n),n},window.TWS_WAPI.sendImageFromDatabasePicBot=function(e,t,n){var i=window.TWS_WAPI.getChatByName("DATABASEPICBOT").msgs.find(t=>t.caption==e);if(void 0===i)return!1;if(void 0===TWS_WAPI.getChat(t))return!1;const o=i.caption;return i.id.id=window.TWS_WAPI.getNewId(),i.id.remote=t,i.t=Math.ceil((new Date).getTime()/1e3),i.to=t,i.caption=void 0!==n&&""!==n?n:"",i.collection.send(i).then(function(e){i.caption=o}),!0},window.TWS_WAPI.sendMessageWithThumb=function(e,t,n,i,o,s,a){var r=TWS_WAPI.getChat(s);if(void 0===r)return void 0!==a&&a(!1),!1;var d={canonicalUrl:t,description:i,matchedText:t,title:n,thumbnail:e,compose:!0};return r.sendMessage(o,{linkPreview:d,mentionedJidList:[],quotedMsg:null,quotedMsgAdminGroupJid:null}),void 0!==a&&a(!0),!0},window.TWS_WAPI.getNewId=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},window.TWS_WAPI.getChatById=function(e,t){let n=TWS_WAPI.getChat(e);return n=!!n&&TWS_WAPI._serializeChatObj(n),void 0!==t&&t(n),n},window.TWS_WAPI.getUnreadMessagesInChat=function(e,t,n,i){let o=TWS_WAPI.getChat(e).msgs._models,s=[];for(let e=o.length-1;e>=0;e--){if("remove"===e)continue;let i=o[e];if("boolean"==typeof i.isNewMsg&&!1!==i.isNewMsg){i.isNewMsg=!1;let e=TWS_WAPI.processMessageObj(i,t,n);e&&s.push(e)}}return void 0!==i&&i(s),s},window.TWS_WAPI.loadEarlierMessages=function(e,t){const n=TWS_WAPI.getChat(e);void 0!==t?n.loadEarlierMsgs().then(function(){t()}):n.loadEarlierMsgs()},window.TWS_WAPI.loadAllEarlierMessages=function(e,t){const n=TWS_WAPI.getChat(e);x=function(){n.msgs.msgLoadState.noEarlierMsgs?t&&t():n.loadEarlierMsgs().then(x)},x()},window.TWS_WAPI.asyncLoadAllEarlierMessages=function(e,t){t(),window.TWS_WAPI.loadAllEarlierMessages(e)},window.TWS_WAPI.areAllMessagesLoaded=function(e,t){return TWS_WAPI.getChat(e).msgs.msgLoadState.noEarlierMsgs?(t&&t(!0),!0):(t&&t(!1),!1)},window.TWS_WAPI.loadEarlierMessagesTillDate=function(e,t,n){const i=TWS_WAPI.getChat(e);x=function(){i.msgs.models[0].t>t&&!i.msgs.msgLoadState.noEarlierMsgs?i.loadEarlierMsgs().then(x):n()},x()},window.TWS_WAPI.getAllGroupMetadata=function(e){const t=window.Store.GroupMetadata.map(e=>e.all);return void 0!==e&&e(t),t},window.TWS_WAPI.getGroupMetadata=async function(e,t){let n=window.Store.GroupMetadata.get(e);return void 0!==n&&n.stale&&await window.Store.GroupMetadata.update(e),void 0!==t&&t(n),n},window.TWS_WAPI._getGroupParticipants=async function(e){return(await TWS_WAPI.getGroupMetadata(e)).participants},window.TWS_WAPI.getGroupParticipantIDs=async function(e,t){const n=(await TWS_WAPI._getGroupParticipants(e)).map(e=>e.id);return void 0!==t&&t(n),n},window.TWS_WAPI.getGroupAdmins=async function(e,t){const n=(await TWS_WAPI._getGroupParticipants(e)).filter(e=>e.isAdmin).map(e=>e.id);return void 0!==t&&t(n),n},window.TWS_WAPI.getMe=function(e){const t=window.Store.Contact.filter(e=>!0===e.isMe).map(e=>TWS_WAPI._serializeContactObj(e));return void 0!==e&&e(t),t},window.TWS_WAPI.isLoggedIn=function(e){const t=window.Store.Contact&&void 0!==window.Store.Contact.checksum;return void 0!==e&&e(t),t},window.TWS_WAPI.isConnected=function(e){const t=null===document.querySelector('*[data-icon="alert-phone"]')&&null===document.querySelector('*[data-icon="alert-computer"]');return void 0!==e&&e(t),t},window.TWS_WAPI.processMessageObj=function(e,t,n){return e.isNotification?n?TWS_WAPI._serializeMessageObj(e):void 0:!1===e.id.fromMe||t?TWS_WAPI._serializeMessageObj(e):void 0},window.TWS_WAPI.getAllMessagesInChat=function(e,t,n,i){let o=[];const s=TWS_WAPI.getChat(e).msgs._models;for(const e in s){if("remove"===e)continue;const i=s[e];let a=TWS_WAPI.processMessageObj(i,t,n);a&&o.push(a)}return void 0!==i&&i(o),o},window.TWS_WAPI.getAllMessageIdsInChat=function(e,t,n,i){let o=[];const s=TWS_WAPI.getChat(e).msgs._models;for(const e in s)"remove"===e||!t&&s[e].isMe||!n&&s[e].isNotification||o.push(s[e].id._serialized);return void 0!==i&&i(o),o},window.TWS_WAPI.getMessageById=function(e,t){let n=!1;try{let t=window.Store.Msg.get(e);t&&(n=TWS_WAPI.processMessageObj(t,!0,!0))}catch(e){}if(void 0===t)return n;t(n)},window.TWS_WAPI.ReplyMessage=function(e,t,n){var i=window.Store.Msg.get(e);if(void 0===i)return void 0!==n&&n(!1),!1;i=i.value();const o=TWS_WAPI.getChat(i.chat.id);return void 0!==o?void 0!==n?(o.sendMessage(t,null,i).then(function(){var e=0;!function i(){for(let e=o.msgs.models.length-1;e>=0;e--){let i=o.msgs.models[e];if(i.senderObj.isMe&&i.body==t)return n(TWS_WAPI._serializeMessageObj(i)),True}var s;(e+=1)>30?n(!0):(s=500,new Promise(e=>setTimeout(e,s))).then(i)}()}),!0):(o.sendMessage(t,null,i),!0):(void 0!==n&&n(!1),!1)},window.TWS_WAPI.sendMessageToID=function(e,t,n){try{window.getContact=(e=>Store.WapQuery.queryExist(e)),window.getContact(e).then(i=>{404===i.status?n(!0):Store.Chat.find(i.jid).then(e=>(e.sendMessage(t),!0)).catch(i=>TWS_WAPI.sendMessage(e,t)?(n(!0),!0):(n(!1),!1))})}catch(o){if(0===window.Store.Chat.length)return!1;firstChat=Store.Chat.models[0];var i=firstChat.id;return firstChat.id="string"==typeof i?e:new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0}),void 0!==n?(firstChat.sendMessage(t).then(function(){firstChat.id=i,n(!0)}),!0):(firstChat.sendMessage(t),firstChat.id=i,!0)}return void 0!==n&&n(!1),!1},window.TWS_WAPI.sendMessage=function(e,t,n){var i=TWS_WAPI.getChat(e);return void 0!==i?void 0!==n?(i.sendMessage(t).then(function(){var e=0;!function o(){for(let e=i.msgs.models.length-1;e>=0;e--){let o=i.msgs.models[e];if(o.senderObj.isMe&&o.body==t)return n(TWS_WAPI._serializeMessageObj(o)),True}var s;e+=1,console.log(e),e>30?n(!0):(s=500,new Promise(e=>setTimeout(e,s))).then(o)}()}),!0):(i.sendMessage(t),!0):(void 0!==n&&n(!1),!1)},window.TWS_WAPI.sendMessage2=function(e,t,n){var i=TWS_WAPI.getChat(e);if(void 0!==i)try{return void 0!==n?i.sendMessage(t).then(function(){n(!0)}):i.sendMessage(t),!0}catch(e){return void 0!==n&&n(!1),!1}return void 0!==n&&n(!1),!1},window.TWS_WAPI.sendSeen=function(e,t){var n=window.TWS_WAPI.getChat(e);return void 0!==n?void 0!==t?(void 0===n.getLastMsgKeyForAction&&(n.getLastMsgKeyForAction=function(){}),Store.SendSeen(n,!1).then(function(){t(!0)}),!0):(Store.SendSeen(n,!1),!0):(void 0!==t&&t(),!1)},window.TWS_WAPI.getUnreadMessages=function(e,t,n,i){const o=window.Store.Chat.models;let s=[];for(let i in o){if(isNaN(i))continue;let a=o[i],r=TWS_WAPI._serializeChatObj(a);r.messages=[];const d=a.msgs._models;for(let n=d.length-1;n>=0;n--){let i=d[n];if("boolean"==typeof i.isNewMsg&&!1!==i.isNewMsg){i.isNewMsg=!1;let n=TWS_WAPI.processMessageObj(i,e,t);n&&r.messages.push(n)}}if(r.messages.length>0)s.push(r);else if(n){let n=a.unreadCount;for(let i=d.length-1;i>=0;i--){let o=d[i];if(n>0){if(!o.isSentByMe){let i=TWS_WAPI.processMessageObj(o,e,t);r.messages.unshift(i),n-=1}}else{if(-1!==n)break;if(!o.isSentByMe){let n=TWS_WAPI.processMessageObj(o,e,t);r.messages.unshift(n);break}}}r.messages.length>0&&(a.unreadCount=0,s.push(r))}}return void 0!==i&&i(s),s},window.TWS_WAPI.getGroupOwnerID=async function(e,t){const n=(await TWS_WAPI.getGroupMetadata(e)).owner.id;return void 0!==t&&t(n),n},window.TWS_WAPI.getCommonGroups=async function(e,t){let n=[];groups=await window.TWS_WAPI.getAllGroups();for(let t in groups)try{participants=await window.TWS_WAPI.getGroupParticipantIDs(groups[t].id),participants.filter(t=>t==e).length&&n.push(groups[t])}catch(e){console.log("Error in group:"),console.log(groups[t]),console.log(e)}return void 0!==t&&t(n),n},window.TWS_WAPI.getProfilePicSmallFromId=function(e,t){window.Store.ProfilePicThumb.find(e).then(function(e){void 0!==e.img?window.TWS_WAPI.downloadFileWithCredentials(e.img,t):t(!1)},function(e){t(!1)})},window.TWS_WAPI.getProfilePicFromId=function(e,t){window.Store.ProfilePicThumb.find(e).then(function(e){void 0!==e.imgFull?window.TWS_WAPI.downloadFileWithCredentials(e.imgFull,t):t(!1)},function(e){t(!1)})},window.TWS_WAPI.downloadFileWithCredentials=function(e,t){let n=new XMLHttpRequest;n.onload=function(){if(4==n.readyState)if(200==n.status){let e=new FileReader;e.readAsDataURL(n.response),e.onload=function(n){t(e.result.substr(e.result.indexOf(",")+1))}}else console.error(n.statusText);else console.log(err),t(!1)},n.open("GET",e,!0),n.withCredentials=!0,n.responseType="blob",n.send(null)},window.TWS_WAPI.downloadFile=function(e,t){let n=new XMLHttpRequest;n.onload=function(){if(4==n.readyState)if(200==n.status){let e=new FileReader;e.readAsDataURL(n.response),e.onload=function(n){t(e.result.substr(e.result.indexOf(",")+1))}}else console.error(n.statusText);else console.log(err),t(!1)},n.open("GET",e,!0),n.responseType="blob",n.send(null)},window.TWS_WAPI.getBatteryLevel=function(e){return window.Store.Conn.plugged?(void 0!==e&&e(100),100):(output=window.Store.Conn.battery,void 0!==e&&e(output),output)},window.TWS_WAPI.deleteConversation=function(e,t){let n=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0}),i=TWS_WAPI.getChat(n);return i?(window.Store.sendDelete(i,!1).then(()=>{void 0!==t&&t(!0)}).catch(()=>{void 0!==t&&t(!1)}),!0):(void 0!==t&&t(!1),!1)},window.TWS_WAPI.deleteMessage=function(e,t,n=!1,i){let o=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0}),s=TWS_WAPI.getChat(o);if(!s)return void 0!==i&&i(!1),!1;Array.isArray(t)||(t=[t]);let a=t.map(e=>window.Store.Msg.get(e));return n?s.sendRevokeMsgs(a,s):s.sendDeleteMsgs(a,s),void 0!==i&&i(!0),!0},window.TWS_WAPI.checkNumberStatus=function(e,t){return window.Store.WapQuery.queryExist(e).then(e=>{if(void 0!==t){if(void 0===e.jid)throw 404;t(window.TWS_WAPI._serializeNumberStatusObj(e))}}).catch(n=>{void 0!==t&&t(window.TWS_WAPI._serializeNumberStatusObj({status:n,jid:e}))}),!0},window.TWS_WAPI._newMessagesQueue=[],window.TWS_WAPI._newMessagesBuffer=null!=sessionStorage.getItem("saved_msgs")?JSON.parse(sessionStorage.getItem("saved_msgs")):[],window.TWS_WAPI._newMessagesDebouncer=null,window.TWS_WAPI._newMessagesCallbacks=[],window.Store.Msg.off("add"),sessionStorage.removeItem("saved_msgs"),window.TWS_WAPI._newMessagesListener=window.Store.Msg.on("add",e=>{if(e&&e.isNewMsg&&!e.isSentByMe){let t=window.TWS_WAPI.processMessageObj(e,!1,!1);t&&(window.TWS_WAPI._newMessagesQueue.push(t),window.TWS_WAPI._newMessagesBuffer.push(t)),!window.TWS_WAPI._newMessagesDebouncer&&window.TWS_WAPI._newMessagesQueue.length>0&&(window.TWS_WAPI._newMessagesDebouncer=setTimeout(()=>{let e=window.TWS_WAPI._newMessagesQueue;window.TWS_WAPI._newMessagesDebouncer=null,window.TWS_WAPI._newMessagesQueue=[];let t=[];window.TWS_WAPI._newMessagesCallbacks.forEach(function(n){void 0!==n.callback&&n.callback(e),!0===n.rmAfterUse&&t.push(n)}),t.forEach(function(e){let t=window.TWS_WAPI._newMessagesCallbacks.indexOf(e);window.TWS_WAPI._newMessagesCallbacks.splice(t,1)})},1e3))}}),window.TWS_WAPI._unloadInform=(e=>{window.TWS_WAPI._newMessagesBuffer.forEach(e=>{Object.keys(e).forEach(t=>void 0===e[t]?delete e[t]:"")}),sessionStorage.setItem("saved_msgs",JSON.stringify(window.TWS_WAPI._newMessagesBuffer)),window.TWS_WAPI._newMessagesCallbacks.forEach(function(e){void 0!==e.callback&&e.callback({status:-1,message:"page will be reloaded, wait and register callback again."})})}),window.addEventListener("unload",window.TWS_WAPI._unloadInform,!1),window.addEventListener("beforeunload",window.TWS_WAPI._unloadInform,!1),window.addEventListener("pageunload",window.TWS_WAPI._unloadInform,!1),window.TWS_WAPI.waitNewMessages=function(e=!0,t){return window.TWS_WAPI._newMessagesCallbacks.push({callback:t,rmAfterUse:e}),!0},window.TWS_WAPI.getBufferedNewMessages=function(e){let t=window.TWS_WAPI._newMessagesBuffer;return window.TWS_WAPI._newMessagesBuffer=[],void 0!==e&&e(t),t},window.TWS_WAPI.sendImage=function(e,t,n,i,o){var s=new window.Store.UserConstructor(t,{intentionallyUsePrivateConstructor:!0});return Store.Chat.find(s).then(t=>{var s=window.TWS_WAPI.base64ImageToFile(e,n),a=new Store.MediaCollection(t);a.processAttachments([{file:s},1],t,1).then(()=>{a.models[0].sendToChat(t,{caption:i}),void 0!==o&&o(!0)})})},window.TWS_WAPI.base64ImageToFile=function(e,t){for(var n=e.split(","),i=n[0].match(/:(.*?);/)[1],o=atob(n[1]),s=o.length,a=new Uint8Array(s);s--;)a[s]=o.charCodeAt(s);return new File([a],t,{type:i})},window.TWS_WAPI.sendContact=function(e,t){Array.isArray(t)||(t=[t]),(t=t.map(e=>TWS_WAPI.getChat(e).__x_contact)).length>1?window.TWS_WAPI.getChat(e).sendContactList(t):1===t.length&&window.TWS_WAPI.getChat(e).sendContact(t[0])},window.TWS_WAPI.getNewMessageId=function(e){var t=Store.Msg.models[0].__x_id.clone();return t.fromMe=!0,t.id=TWS_WAPI.getNewId().toUpperCase(),t.remote=e,t._serialized=`${t.fromMe}_${t.remote}_${t.id}`,t},window.TWS_WAPI.sendVCard=function(e,t){var n=Store.Chat.get(e),i=Object.create(Store.Msg.models.filter(e=>e.__x_isSentByMe)[0]),o={ack:0,id:window.TWS_WAPI.getNewMessageId(e),local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),to:e,isNewMsg:!0};Array.isArray(t)?(Object.assign(o,{type:"multi_vcard",vcardList:t}),delete o.body):(Object.assign(o,{type:"vcard",subtype:t.displayName,body:t.vcard}),delete o.vcardList),Object.assign(i,o),n.addAndSendMsg(i)},window.TWS_WAPI.contactBlock=function(e,t){const n=window.Store.Contact.get(e);return void 0!==n?(n.setBlock(!0),t(!0),!0):(t(!1),!1)},window.TWS_WAPI.contactUnblock=function(e,t){const n=window.Store.Contact.get(e);return void 0!==n?(n.setBlock(!1),t(!0),!0):(t(!1),!1)},window.TWS_WAPI.removeParticipantGroup=function(e,t,n){window.Store.WapQuery.removeParticipants(e,[t]).then(()=>{const e=window.Store.GroupMetadata.get(id);if(checkParticipant=e.participants._index[t],void 0===checkParticipant)return n(!0),!0})},window.TWS_WAPI.promoteParticipantAdminGroup=function(e,t,n){window.Store.WapQuery.promoteParticipants(e,[t]).then(()=>{const e=window.Store.GroupMetadata.get(id);return checkParticipant=e.participants._index[t],void 0!==checkParticipant&&checkParticipant.isAdmin?(n(!0),!0):(n(!1),!1)})},window.TWS_WAPI.demoteParticipantAdminGroup=function(e,t,n){window.Store.WapQuery.demoteParticipants(e,[t]).then(()=>{const e=window.Store.GroupMetadata.get(id);return void 0===e?(n(!1),!1):(checkParticipant=e.participants._index[t],void 0!==checkParticipant&&checkParticipant.isAdmin?(n(!1),!1):(n(!0),!0))})}}).then(t=>{clearInterval(e),window.dispatchEvent(new CustomEvent("tws::page-loaded"))}).catch(()=>{})},1e3);async function t(){let e=window.TWS_WAPI.getMe();if(0===e.length)return setTimeout(t,200);window.dispatchEvent(new CustomEvent("tws::me-is-ready",{detail:{me:e[0].id.user}}))}window.addEventListener("tws::get-me",function(){try{t()}catch(e){}})}();